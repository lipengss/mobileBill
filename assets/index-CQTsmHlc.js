import{d as P,m as j,c as U,a as t,g as W,w as Y,b as Z,r as S,e as M,f as T,h as G,i as N,u as q,j as J,o as K,n as H,k as Q,l as tt,p as et,q as at,v as lt,s as it,t as nt,T as ot,x as rt,y as L,z as st,A as dt,B,C as A,D as F,E as $,F as ct,G as z,H as w,I as R,J as ut,K as ft,L as x,M as _,_ as ht}from"./index-B7y8NV7K.js";import{f as mt,L as vt}from"./filterData-BmkAqDsn.js";import{u as V,d as xt,g as gt,f as I}from"./index-B_WEiTrX.js";import{f as yt}from"./formData-B4r_lAz1.js";import{_ as pt}from"./index.vue_vue_type_script_setup_true_lang-B8luzZ9R.js";import{E as Ft}from"./index-pDfDG_V1.js";import{u as wt}from"./index-D0L9yTHE.js";function O(l,u){return l.reduce((h,v)=>Math.abs(h-u)<Math.abs(v-u)?h:v)}const[Et,C]=U("empty"),bt={image:j("default"),imageSize:[Number,String,Array],description:String};var Dt=P({name:Et,props:bt,setup(l,{slots:u}){const h=()=>{const r=u.description?u.description():l.description;if(r)return t("p",{class:C("description")},[r])},v=()=>{if(u.default)return t("div",{class:C("bottom")},[u.default()])},E=wt(),a=r=>`${E}-${r}`,e=r=>`url(#${a(r)})`,o=(r,m,i)=>t("stop",{"stop-color":r,offset:`${m}%`,"stop-opacity":i},null),c=(r,m)=>[o(r,0),o(m,100)],g=r=>[t("defs",null,[t("radialGradient",{id:a(r),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[o("#EBEDF0",0),o("#F2F3F5",100,.3)])]),t("ellipse",{fill:e(r),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],n=()=>[t("defs",null,[t("linearGradient",{id:a("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[o("#FFF",0,.5),o("#F2F3F5",100)])]),t("g",{opacity:".8","data-allow-mismatch":"children"},[t("path",{d:"M36 131V53H16v20H2v58h34z",fill:e("a")},null),t("path",{d:"M123 15h22v14h9v77h-31V15z",fill:e("a")},null)])],f=()=>[t("defs",null,[t("linearGradient",{id:a("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[o("#F2F3F5",0,.3),o("#F2F3F5",100)])]),t("g",{opacity:".8","data-allow-mismatch":"children"},[t("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:e("b")},null),t("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:e("b")},null)])],y=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",{"data-allow-mismatch":"children"},[t("linearGradient",{id:a(1),x1:"64%",y1:"100%",x2:"64%"},[o("#FFF",0,.5),o("#F2F3F5",100)]),t("linearGradient",{id:a(2),x1:"50%",x2:"50%",y2:"84%"},[o("#EBEDF0",0),o("#DCDEE0",100,0)]),t("linearGradient",{id:a(3),x1:"100%",x2:"100%",y2:"100%"},[c("#EAEDF0","#DCDEE0")]),t("radialGradient",{id:a(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[o("#EBEDF0",0),o("#FFF",100,0)])]),t("g",{fill:"none"},[n(),t("path",{fill:e(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),t("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:e(2),"data-allow-mismatch":"attribute"},null),t("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[t("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:e(3)},null),t("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:e(3)},null),t("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:e(3)},null),t("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:e(3)},null)]),t("g",{transform:"translate(31 105)"},[t("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),t("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),t("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),p=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",{"data-allow-mismatch":"children"},[t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:a(5)},[c("#F2F3F5","#DCDEE0")]),t("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:a(6)},[c("#EAEDF1","#DCDEE0")]),t("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:a(7)},[c("#EAEDF1","#DCDEE0")])]),n(),f(),t("g",{transform:"translate(36 50)",fill:"none"},[t("g",{transform:"translate(8)"},[t("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),t("rect",{fill:e(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),t("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),t("g",{transform:"translate(15 17)",fill:e(6),"data-allow-mismatch":"attribute"},[t("rect",{width:"34",height:"6",rx:"1"},null),t("path",{d:"M0 14h34v6H0z"},null),t("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),t("rect",{fill:e(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),t("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),k=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",null,[t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:a(8),"data-allow-mismatch":"attribute"},[c("#EAEDF1","#DCDEE0")])]),n(),f(),g("c"),t("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:e(8),"data-allow-mismatch":"attribute"},null)]),d=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",{"data-allow-mismatch":"children"},[t("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:a(9)},[c("#EEE","#D8D8D8")]),t("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:a(10)},[c("#F2F3F5","#DCDEE0")]),t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:a(11)},[c("#F2F3F5","#DCDEE0")]),t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:a(12)},[c("#FFF","#F7F8FA")])]),n(),f(),g("d"),t("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[t("rect",{fill:e(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),t("rect",{fill:e(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),t("circle",{stroke:e(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),t("circle",{fill:e(12),cx:"27",cy:"27",r:"16"},null),t("path",{d:"M37 7c-8 0-15 5-16 12",stroke:e(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),b=()=>{var r;if(u.image)return u.image();const m={error:k,search:d,network:y,default:p};return((r=m[l.image])==null?void 0:r.call(m))||t("img",{src:l.image},null)};return()=>t("div",{class:C()},[t("div",{class:C("image"),style:W(l.imageSize)},[b()]),h(),v()])}});const kt=Y(Dt),_t={gap:Z(24),icon:String,axis:j("y"),magnetic:String,offset:{type:Object,default:()=>({x:-1,y:-1})},teleport:{type:[String,Object],default:"body"}},[St,X]=U("floating-bubble");var Bt=P({name:St,inheritAttrs:!1,props:_t,emits:["click","update:offset","offsetChange"],setup(l,{slots:u,emit:h,attrs:v}){const E=S(),a=S({x:0,y:0,width:0,height:0}),e=M(()=>({top:l.gap,right:G.value-a.value.width-l.gap,bottom:T.value-a.value.height-l.gap,left:l.gap})),o=S(!1);let c=!1;const g=M(()=>{const i={},D=N(a.value.x),s=N(a.value.y);return i.transform=`translate3d(${D}, ${s}, 0)`,(o.value||!c)&&(i.transition="none"),i}),n=()=>{if(!m.value)return;const{width:i,height:D}=rt(E.value),{offset:s}=l;a.value={x:s.x>-1?s.x:G.value-i-l.gap,y:s.y>-1?s.y:T.value-D-l.gap,width:i,height:D}},f=q();let y=0,p=0;const k=i=>{f.start(i),o.value=!0,y=a.value.x,p=a.value.y};J("touchmove",i=>{if(i.preventDefault(),f.move(i),l.axis!=="lock"&&!f.isTap.value){if(l.axis==="x"||l.axis==="xy"){let s=y+f.deltaX.value;s<e.value.left&&(s=e.value.left),s>e.value.right&&(s=e.value.right),a.value.x=s}if(l.axis==="y"||l.axis==="xy"){let s=p+f.deltaY.value;s<e.value.top&&(s=e.value.top),s>e.value.bottom&&(s=e.value.bottom),a.value.y=s}const D=L(a.value,["x","y"]);h("update:offset",D)}},{target:E});const b=()=>{o.value=!1,H(()=>{if(l.magnetic==="x"){const i=O([e.value.left,e.value.right],a.value.x);a.value.x=i}if(l.magnetic==="y"){const i=O([e.value.top,e.value.bottom],a.value.y);a.value.y=i}if(!f.isTap.value){const i=L(a.value,["x","y"]);h("update:offset",i),(y!==i.x||p!==i.y)&&h("offsetChange",i)}})},r=i=>{f.isTap.value?h("click",i):i.stopPropagation()};K(()=>{n(),H(()=>{c=!0})}),Q([G,T,()=>l.gap,()=>l.offset],n,{deep:!0});const m=S(!0);return tt(()=>{m.value=!0}),et(()=>{l.teleport&&(m.value=!1)}),()=>{const i=at(t("div",nt({class:X(),ref:E,onTouchstartPassive:k,onTouchend:b,onTouchcancel:b,onClickCapture:r,style:g.value},v),[u.default?u.default():t(it,{name:l.icon,class:X("icon")},null)]),[[lt,m.value]]);return l.teleport?t(ot,{to:l.teleport},{default:()=>[i]}):i}}});const Ct=Y(Bt),Mt={class:"line"},Tt={class:"date"},Gt={class:"price"},At={class:"num num1"},$t={class:"num num1"},zt={class:"num"},It=P({__name:"index",setup(l){const u=V(),{filter:h,formatBillList:v,billList:E}=st(V()),a=S(),e=dt({loading:!1,finished:!0}),o=M(()=>{var g;return((g=Ft.get(h.value.expenses))==null?void 0:g.color)||""}),c=M(()=>({x:window.innerWidth-60,y:window.innerHeight-110}));return u.init(),(g,n)=>{const f=vt,y=ft,p=kt,k=Ct;return w(),B(z,null,[t(mt),F(v).length?(w(),A(f,{key:0,loading:e.loading,"onUpdate:loading":n[0]||(n[0]=d=>e.loading=d),finished:e.finished,"finished-text":"没有更多了"},{default:$(()=>[(w(!0),B(z,null,R(F(v),d=>(w(),B("div",{key:d.date,class:"card"},[x("div",Mt,[x("div",Tt,_(F(xt)(d.date).format("MM月DD日"))+" "+_(F(gt)(d.date)),1),x("div",Gt,[n[4]||(n[4]=x("div",{class:"text"},"入",-1)),x("div",At,_(F(I)(d.totalIncome)),1),n[5]||(n[5]=x("div",{class:"text"},"出",-1)),x("div",$t,_(F(I)(d.totalPay)),1),n[6]||(n[6]=x("div",{class:"text"},"费",-1)),x("div",zt,_(F(I)(d.totalServiceFee)),1)])]),(w(!0),B(z,null,R(d.list,b=>(w(),A(pt,{bill:b,class:"home-cell-list"},null,8,["bill"]))),256))]))),128))]),_:1},8,["loading","finished"])):(w(),A(p,{key:1,description:"掌握财务，从记账开始。"},{default:$(()=>[t(y,{round:"",block:"",type:"primary",class:"bottom-button",onClick:n[1]||(n[1]=d=>a.value.onAddOrder())},{default:$(()=>n[7]||(n[7]=[ut(" 记 一 笔 ")])),_:1})]),_:1})),t(yt,{ref_key:"formRef",ref:a},null,512),t(k,{axis:"xy",icon:"records-o",magnetic:"x",offset:c.value,"onUpdate:offset":n[2]||(n[2]=d=>c.value=d),onClick:n[3]||(n[3]=d=>a.value.onAddOrder()),style:ct({backgroundColor:o.value})},null,8,["offset","style"])],64)}}}),Xt=ht(It,[["__scopeId","data-v-560a13c7"]]);export{Xt as default};
