import{d as I,W as M,V as X,c as j,r as E,A as G,u as J,e as R,x as K,aF as z,a3 as Q,aA as U,j as Y,a as i,au as Z,aG as ee,aS as te,w as oe,C as ae,H as F,E as c,L as O,B as le,aq as se,M as v,D as r,J as T,aa as ne,Q as ie,F as ce,K as re}from"./index-B7y8NV7K.js";import{u as ue,f as fe,C as de}from"./index-B_WEiTrX.js";import{E as k,c as pe,b as V,P as A,T as ge}from"./index-pDfDG_V1.js";const[me,w]=j("swipe-cell"),he={name:X(""),disabled:Boolean,leftWidth:M,rightWidth:M,beforeClose:Function,stopPropagation:Boolean};var ve=I({name:me,props:he,emits:["open","close","click"],setup(a,{emit:b,slots:_}){let t,f,p,d;const g=E(),C=E(),y=E(),l=G({offset:0,dragging:!1}),m=J(),o=e=>e.value?K(e).width:0,s=R(()=>z(a.leftWidth)?+a.leftWidth:o(C)),h=R(()=>z(a.rightWidth)?+a.rightWidth:o(y)),B=e=>{l.offset=e==="left"?s.value:-h.value,t||(t=!0,b("open",{name:a.name,position:e}))},S=e=>{l.offset=0,t&&(t=!1,b("close",{name:a.name,position:e}))},q=e=>{const n=Math.abs(l.offset),u=.15,x=t?1-u:u,H=e==="left"?s.value:h.value;H&&n>H*x?B(e):S(e)},L=e=>{a.disabled||(p=l.offset,m.start(e))},$=e=>{if(a.disabled)return;const{deltaX:n}=m;m.move(e),m.isHorizontal()&&(f=!0,l.dragging=!0,(!t||n.value*p<0)&&Z(e,a.stopPropagation),l.offset=ee(n.value+p,-h.value,s.value))},P=()=>{l.dragging&&(l.dragging=!1,q(l.offset>0?"left":"right"),setTimeout(()=>{f=!1},0))},W=(e="outside",n)=>{d||(b("click",e),t&&!f&&(d=!0,te(a.beforeClose,{args:[{event:n,name:a.name,position:e}],done:()=>{d=!1,S(e)},canceled:()=>d=!1,error:()=>d=!1})))},N=(e,n)=>u=>{n&&u.stopPropagation(),!f&&W(e,u)},D=(e,n)=>{const u=_[e];if(u)return i("div",{ref:n,class:w(e),onClick:N(e,!0)},[u()])};return Q({open:B,close:S}),U(g,e=>W("outside",e),{eventName:"touchstart"}),Y("touchmove",$,{target:g}),()=>{var e;const n={transform:`translate3d(${l.offset}px, 0, 0)`,transitionDuration:l.dragging?"0s":".6s"};return i("div",{ref:g,class:w(),onClick:N("cell",f),onTouchstartPassive:L,onTouchend:P,onTouchcancel:P},[i("div",{class:w("wrapper"),style:n},[D("left",C),(e=_.default)==null?void 0:e.call(_),D("right",y)])])}}});const be=oe(ve),_e={key:0,style:{"font-size":"12px"}},Se=I({__name:"index",props:{bill:{}},setup(a){const b=ue(),_=a;return(t,f)=>{const p=ie,d=ge,g=pe,C=ne,y=de,l=re,m=be;return F(),ae(m,null,{right:c(()=>[i(l,{square:"",text:"删除",type:"danger",class:"delete-button",onClick:f[0]||(f[0]=o=>r(b).deleteBillOrder(t.bill.id))})]),default:c(()=>[i(y,{center:"","title-class":"single-line-ellipsis","title-style":"flex:2;",to:{path:"/details",query:{id:_.bill.id}},size:"large"},{icon:c(()=>{var o,s;return[O("div",{class:"icon-purpose",style:ce(`--color: ${(o=r(k).get(t.bill.expenses))==null?void 0:o.color}`)},[i(p,{name:((s=r(A).get(t.bill.purpose))==null?void 0:s.icon)||""},null,8,["name"])],4)]}),title:c(()=>[i(g,null,{default:c(()=>{var o,s;return[T(v((o=r(A).get(t.bill.purpose))==null?void 0:o.label)+" ",1),i(d,{round:"",plain:"",type:(s=r(k).get(t.bill.expenses))==null?void 0:s.type},{default:c(()=>{var h;return[T(v((h=r(k).get(t.bill.expenses))==null?void 0:h.label),1)]}),_:1},8,["type"])]}),_:1})]),label:c(()=>[i(g,{align:"center"},{default:c(()=>[i(C,{size:18},{default:c(()=>{var o,s;return[i(p,{name:(o=r(V).get(t.bill.payMethod))==null?void 0:o.icon,color:(s=r(V).get(t.bill.payMethod))==null?void 0:s.color},null,8,["name","color"])]}),_:1}),T(" "+v(t.bill.remarks||"无备注"),1)]),_:1})]),value:c(()=>{var o;return[O("div",null,v((o=r(k).get(t.bill.expenses))==null?void 0:o.unit)+" "+v(r(fe)(t.bill.price)),1),t.bill.serviceFee?(F(),le("div",_e,"- "+v(t.bill.serviceFee),1)):se("",!0)]}),_:1},8,["to"])]),_:1})}}});export{Se as _};
